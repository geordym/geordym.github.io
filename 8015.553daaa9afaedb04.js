"use strict";(self.webpackChunkproject_portafolio=self.webpackChunkproject_portafolio||[]).push([[8015],{8015:(B,d,l)=>{l.r(d),l.d(d,{EmitterInstance:()=>S});var z=l(467),i=l(1033),f=l(5051),P=l(1727);function C(p,t){p.color?p.color.value=t:p.color={value:t}}class S{constructor(t,e,o,a,_){this.emitters=e,this.container=o,this._destroy=()=>{this._mutationObserver?.disconnect(),this._mutationObserver=void 0,this._resizeObserver?.disconnect(),this._resizeObserver=void 0,this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._prepareToDie=()=>{if(this._paused)return;const n=void 0!==this.options.life?.duration?(0,i.VG)(this.options.life.duration):void 0;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&void 0!==n&&n>0&&(this._duration=n*i.Xu)},this._setColorAnimation=(n,u,w,A=1)=>{const v=this.container;if(!n.enable)return u;const b=(0,i.BH)(n.offset),R=(0,i.VG)(this.options.rate.delay)*i.Xu/v.retina.reduceFactor;return(u+(0,i.VG)(n.speed??0)*v.fpsLimit/R+b*A)%w},this._engine=t,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=_,a instanceof f.Emitter?this.options=a:(this.options=new f.Emitter,this.options.load(a)),this._spawnDelay=(0,i.VG)(this.options.life.delay??0)*i.Xu/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let r=(0,i.zw)({},this.options.particles);if(r??={},r.move??={},r.move.direction??=this.options.direction,this.options.spawnColor&&(this.spawnColor=(0,i.R5)(this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=r,this._size=this._calcSize(),this.size=(0,i.YC)(this._size,this.container.canvas.size),this._lifeCount=this.options.life.count??-1,this._immortal=this._lifeCount<=0,this.options.domId){const n=document.getElementById(this.options.domId);n&&(this._mutationObserver=new MutationObserver(()=>{this.resize()}),this._resizeObserver=new ResizeObserver(()=>{this.resize()}),this._mutationObserver.observe(n,{attributes:!0,attributeFilter:["style","width","height"]}),this._resizeObserver.observe(n))}const s=this.options.shape,h=this._engine.emitterShapeManager?.getShapeGenerator(s.type);h&&(this._shape=h.generate(this.position,this.size,this.fill,s.options)),this._engine.dispatchEvent("emitterCreated",{container:o,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}init(){var t=this;return(0,z.A)(function*(){yield t._shape?.init()})()}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??0))){if(void 0===this._emitDelay){const t=(0,i.VG)(this.options.rate.delay);this._emitDelay=t*i.Xu/this.container.retina.reduceFactor}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}}resize(){const t=this._initialPosition;this.position=t&&(0,i.Tj)(t,this.container.canvas.size,i.Mi.origin)?t:this._calcPosition(),this._size=this._calcSize(),this.size=(0,i.YC)(this._size,this.container.canvas.size),this._shape?.resize(this.position,this.size)}update(t){this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??0,this._currentEmitDelay=this._emitDelay??0),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),void 0!==this._duration&&(this._currentDuration+=t.value,this._currentDuration>=this._duration&&(this.pause(),void 0!==this._spawnDelay&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal?(this.position=this._calcPosition(),this._shape?.resize(this.position,this.size),this._spawnDelay=(0,i.VG)(this.options.life.delay??0)*i.Xu/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),void 0!==this._spawnDelay&&(this._currentSpawnDelay+=t.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),void 0!==this._emitDelay&&(this._currentEmitDelay+=t.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}_calcPosition(){if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const e=t.getBoundingClientRect(),o=this.container.retina.pixelRatio;return{x:(e.x+.5*e.width)*o,y:(e.y+.5*e.height)*o}}}return(0,i.l1)({size:this.container.canvas.size,position:this.options.position})}_calcSize(){const t=this.container;if(this.options.domId){const e=document.getElementById(this.options.domId);if(e){const o=e.getBoundingClientRect();return{width:o.width*t.retina.pixelRatio,height:o.height*t.retina.pixelRatio,mode:"precise"}}}return this.options.size??(()=>{const e=new P.G;return e.load({height:0,mode:"percent",width:0}),e})()}_emit(){if(this._paused)return;const t=(0,i.VG)(this.options.rate.quantity);this._emitParticles(t)}_emitParticles(t){const e=(0,i.TA)(this._particlesOptions);for(let o=0;o<t;o++){const a=(0,i.zw)({},e);if(this.spawnColor){const s=this.options.spawnColor?.animation;if(s){const h={h:360,s:100,l:100};this.spawnColor.h=this._setColorAnimation(s.h,this.spawnColor.h,h.h,3.6),this.spawnColor.s=this._setColorAnimation(s.s,this.spawnColor.s,h.s),this.spawnColor.l=this._setColorAnimation(s.l,this.spawnColor.l,h.l)}C(a,this.spawnColor)}const _=this.options.shape;let r=this.position;if(this._shape){const s=this._shape.randomPosition();if(s){r=s.position;const h=_.replace;h.color&&s.color&&C(a,s.color),h.opacity&&(a.opacity?a.opacity.value=s.opacity:a.opacity={value:s.opacity})}else r=null}r&&this.container.particles.addParticle(r,a)}}}}}]);